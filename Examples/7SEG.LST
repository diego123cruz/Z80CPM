0001   0000             C_PIO_A     =       71h
0002   0000             D_PIO_A     =       70h
0003   0000             C_PIO_B     =       73h
0004   0000             D_PIO_B     =       72h
0005   0000             
0006   8000             .org 8000h
0007   8000 31 00 80        ld      SP, $
0008   8003             
0009   8003                 ; --------------------- output mode PIO --------------
0010   8003 3E 0F           ld      A, 0Fh
0011   8005 D3 71           out     (C_PIO_A), A
0012   8007             
0013   8007 3E 0F           ld      A, 0Fh
0014   8009 D3 73           out     (C_PIO_B), A
0015   800B                 
0016   800B             ;;  --------------------------------------------------------
0017   800B             ;;      MAIN
0018   800B             ;;  --------------------------------------------------------
0019   800B                 
0020   800B             
0021   800B             main:
0022   800B 21 3B 80        ld      hl, digitos
0023   800E 06 FF           ld      b, 255
0024   8010 CD 4C 80        call    beep
0025   8013 CD 4C 80        call    beep
0026   8016 CD 4C 80        call    beep
0027   8019 CD 4C 80        call    beep
0028   801C             next
0029   801C 7E              ld      a, (hl)
0030   801D FE 00           cp      0
0031   801F CA 0B 80        JP      z, main
0032   8022 06 05           ld      b, 5
0033   8024 CD 4C 80        call    beep
0034   8027 D3 70           out     (D_PIO_A), a
0035   8029 D3 72           out     (D_PIO_B), a
0036   802B CD 84 80        call    delay
0037   802E CD 84 80        call    delay
0038   8031 CD 84 80        call    delay
0039   8034 CD 84 80        call    delay
0040   8037 23              inc     hl
0041   8038 C3 1C 80        JP      next
0042   803B             
0043   803B             
0044   803B             
0045   803B             
0046   803B             digitos:
0047   803B 3F065B4F666D    .db $3F, $06, $5B, $4F, $66, $6D, $7D, $07, $7F, $6F ; 0 - 9
0047   8041 7D077F6F
0048   8045 777C395E7971    .db $77, $7C, $39, $5E, $79, $71, 0 ; A - F
0048   804B 00
0049   804C             
0050   804C             
0051   804C             ;;  --------------------------------------------------------
0052   804C             ;;      BEEP duracao in B
0053   804C             ;;  --------------------------------------------------------
0054   804C             beep:
0055   804C F5              push    af
0056   804D C5              push    bc
0057   804E 78              ld  a,  b
0058   804F             beep_loop:
0059   804F 3D              dec     a
0060   8050 FE 00           cp      0
0061   8052 CA 72 80        JP      z, beep_end
0062   8055             
0063   8055 0E 70           ld      c, D_PIO_A
0064   8057 06 80           ld      b, $80   
0065   8059 ED 41           out     (c), b
0066   805B 0E 72           ld      c, D_PIO_B
0067   805D ED 41           out     (c), b
0068   805F             
0069   805F CD 75 80        call    delay_beep
0070   8062             
0071   8062 0E 70           ld      c, D_PIO_A
0072   8064 06 00           ld      b, $00
0073   8066 ED 41           out     (c), b
0074   8068 0E 72           ld      c, D_PIO_B
0075   806A ED 41           out     (c), b
0076   806C CD 75 80        call    delay_beep
0077   806F C3 4F 80        JP      beep_loop
0078   8072             
0079   8072             beep_end:
0080   8072 C1              pop     bc
0081   8073 F1              pop     af
0082   8074 C9              ret
0083   8075             
0084   8075             
0085   8075             ; ===================================================================
0086   8075             ; DELAY BEEP
0087   8075             ; ===================================================================
0088   8075             delay_beep:
0089   8075 C5          	push bc
0090   8076 06 01           ld b, 1
0091   8078             delay_loop_b_beep:
0092   8078 0E 32       	ld c, 50
0093   807A             delay_loop_beep:
0094   807A 0D          	dec c
0095   807B C2 7A 80        jp nz, delay_loop_beep
0096   807E 05              dec b
0097   807F C2 78 80        jp nz, delay_loop_b_beep
0098   8082 C1              pop bc
0099   8083 C9              ret
0100   8084             
0101   8084             
0102   8084             ; ===================================================================
0103   8084             ; DELAY
0104   8084             ; ===================================================================
0105   8084             delay:
0106   8084 C5          	push bc
0107   8085 06 FF           ld b, 255
0108   8087             delay_loop_b:
0109   8087 0E FF       	ld c, 255
0110   8089             delay_loop:
0111   8089 0D          	dec c
0112   808A C2 89 80        jp nz, delay_loop
0113   808D 05              dec b
0114   808E C2 87 80        jp nz, delay_loop_b
0115   8091 C1              pop bc
0116   8092 C9              ret
0117   8093             
0118   8093             
0119   8093             .end 
tasm: Number of errors = 0
