0001   0000             C_PIO_A     =       71h
0002   0000             D_PIO_A     =       70h
0003   0000             C_PIO_B     =       73h
0004   0000             D_PIO_B     =       72h
0005   0000             INPUT_KEYS  =       60h
0006   0000             
0007   8000             .org 8000h
0008   8000 31 00 80        ld      SP, $
0009   8003             
0010   8003                 ; --------------------- output mode PIO-B --------------
0011   8003 3E 0F           ld      A, 0Fh
0012   8005 D3 73           out     (C_PIO_B), A
0013   8007             
0014   8007 3E 0F           ld      A, 0Fh
0015   8009 D3 71           out     (C_PIO_A), A
0016   800B                 
0017   800B             ;;  --------------------------------------------------------
0018   800B             ;;      MAIN
0019   800B             ;;  --------------------------------------------------------
0020   800B             
0021   800B             main:
0022   800B DB 60           in      A, (INPUT_KEYS)   
0023   800D D3 72           out     (D_PIO_B), A
0024   800F D3 70           out     (D_PIO_A), A
0025   8011 CD 17 80        call    delay
0026   8014             
0027   8014 C3 0B 80        JP      main
0028   8017             
0029   8017             ;;  --------------------------------------------------------
0030   8017             ;;      DELAY
0031   8017             ;;  --------------------------------------------------------
0032   8017             delay:
0033   8017 C5          	push bc
0034   8018 06 FF           ld b, 255
0035   801A             delay_loop_b:
0036   801A 0E FF       	ld c, 255
0037   801C             delay_loop:
0038   801C 0D          	dec c
0039   801D C2 1C 80        jp nz, delay_loop
0040   8020 05              dec b
0041   8021 C2 1A 80        jp nz, delay_loop_b
0042   8024 C1              pop bc
0043   8025 C9              ret
0044   8026             
0045   8026             
0046   8026             .end 
tasm: Number of errors = 0
